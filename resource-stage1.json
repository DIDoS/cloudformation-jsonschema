{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "title": "Resource",
    "description": "Cloudformation template resource",
    "properties": {
	"Properties": {
	    "type": "object"
	},
	"Type": {
	    "type": "string"
	}
    },
    "required": [
	"Type"
    ],
    "type": "object",
    "definitions": {
	"basic_types": {
	    "string": {
		"oneOf": [
		    {
			"type": "string"
		    },
		    {
			"$ref": "#/definitions/basic_types/function"
		    }
		]
	    },
	    "integer": {
		"oneOf": [
		    {
			"type": "string",
			"pattern": "^[0-9]+$"
		    },
		    {
			"type": "integer"
		    },
		    {
			"$ref": "#/definitions/basic_types/function"
		    }
		]
	    },
	    "boolean": {
		"oneOf": [
		    {
			"type": "boolean"
		    },
		    {
			"type": "string",
			"enum": [
			    "True",
			    "False",
			    "true",
			    "false"
			]
		    }
		]
	    },
	    "function": {
		"oneOf": [
		    {
			"$ref": "#/definitions/basic_types/functions/Fn::Base64"
		    },
		    {
			"$ref": "#/definitions/basic_types/functions/Fn::FindInMap"
		    },
		    {
			"$ref": "#/definitions/basic_types/functions/Fn::GetAtt"
		    },
		    {
			"$ref": "#/definitions/basic_types/functions/Fn::GetAZs"
		    },
		    {
			"$ref": "#/definitions/basic_types/functions/Fn::Join"
		    },
		    {
			"$ref": "#/definitions/basic_types/functions/Ref"
		    }
		]
	    },
	    "functions": {
		"Fn::Base64": {
		    "type": "object",
		    "additionalProperties": false,
		    "properties": {
			"Fn::Base64": {
			    "$ref": "#/definitions/basic_types/string"
			}
		    },
		    "required": ["Fn::Base64"]
		},
		"Fn::FindInMap": {
		    "type": "object",
		    "additionalProperties": false,
		    "properties": {
			"Fn::FindInMap": {
			    "type": "array",
			    "minItems": 3,
			    "maxItems": 3,
			    "items": {
				"oneOf": [
				    {
					"type": "string"
				    },
				    {
					"$ref": "#/definitions/basic_types/functions/Fn::FindInMap"
				    },
				    {
					"$ref": "#/definitions/basic_types/functions/Ref"
				    }
				]
			    }
			}
		    },
		    "required": ["Fn::FindInMap"]
		},
		"Fn::GetAtt": {
		    "type": "object",
		    "additionalProperties": false,
		    "properties": {
			"Fn::GetAtt": {
			    "type": "array",
			    "minItems": 2,
			    "maxItems": 2,
			    "items": [
				{
				    "type": "string"
				},
				{
				    "oneOf": [
					{
					    "type": "string"
					},
					{
					    "$ref": "#/definitions/basic_types/functions/Ref"
					}
				    ]
				}
			    ]

			}
		    },
		    "required": ["Fn::GetAtt"]
		},
		"Fn::GetAZs": {
		    "type": "object",
		    "additionalProperties": false,
		    "properties": {
			"Fn::GetAZs": {
			    "oneOf": [
				{
				    "type": "string"
				},
				{
				    "oneOf": [
					{
					    "type": "string"
					},
					{
					    "$ref": "#/definitions/basic_types/functions/Ref"
					}
				    ]
				}
			    ]

			}
		    },
		    "required": ["Fn::GetAZs"]
		},
		"Fn::Join": {
		    "type": "object",
		    "additionalProperties": false,
		    "properties": {
			"Fn::Join": {
			    "type": "array",
			    "minItems": 2,
			    "maxItems": 2,
			    "items": [
				{
				    "type": "string"
				},
				{
				    "type": "array",
				    "items": {
					"$ref": "#/definitions/basic_types/string"
				    }
				}
			    ]

			}
		    },
		    "required": ["Fn::Join"]
		},
		"Ref": {
		    "type": "object",
		    "additionalProperties": false,
		    "properties": {
			"Ref": {
			    "$ref": "#/definitions/basic_types/string"
			}
		    },
		    "required": ["Ref"]
		}
	    }
	}
    }
}
